2025-10-19 00:42:28.433 [background-preinit] INFO  o.h.validator.internal.util.Version - [] HV000001: Hibernate Validator 8.0.3.Final
2025-10-19 00:42:28.622 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Starting SimplePaymentProcessingServiceApplication using Java 17.0.16 with PID 61632 (C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps\pps\target\classes started by USER in C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps)
2025-10-19 00:42:28.625 [main] DEBUG c.e.p.SimplePaymentProcessingServiceApplication - [] Running with Spring Boot v3.5.6, Spring v6.2.11
2025-10-19 00:42:28.628 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] The following 1 profile is active: "prod"
2025-10-19 00:42:31.230 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-19 00:42:31.666 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Finished Spring Data repository scanning in 377 ms. Found 3 JPA repository interfaces.
2025-10-19 00:42:33.587 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat initialized with port 8080 (http)
2025-10-19 00:42:33.615 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Initializing ProtocolHandler ["http-nio-8080"]
2025-10-19 00:42:33.618 [main] INFO  o.a.catalina.core.StandardService - [] Starting service [Tomcat]
2025-10-19 00:42:33.619 [main] INFO  o.a.catalina.core.StandardEngine - [] Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-19 00:42:33.832 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - [] Initializing Spring embedded WebApplicationContext
2025-10-19 00:42:33.833 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - [] Root WebApplicationContext: initialization completed in 5091 ms
2025-10-19 00:42:34.347 [main] INFO  o.h.jpa.internal.util.LogHelper - [] HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-19 00:42:34.586 [main] INFO  org.hibernate.Version - [] HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-19 00:42:34.706 [main] INFO  o.h.c.i.RegionFactoryInitiator - [] HHH000026: Second-level cache disabled
2025-10-19 00:42:35.550 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - [] No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-19 00:42:35.639 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Starting...
2025-10-19 00:42:36.198 [main] INFO  com.zaxxer.hikari.pool.HikariPool - [] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3534651a
2025-10-19 00:42:36.201 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Start completed.
2025-10-19 00:42:36.462 [main] INFO  o.hibernate.orm.connections.pooling - [] HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-19 00:42:38.705 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - [] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-19 00:42:39.141 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - [] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-19 00:42:39.154 [main] INFO  com.example.pps.config.DebugConfig - [] Resolved DB_PASSWORD: ppspass
2025-10-19 00:42:41.073 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - [] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-19 00:42:41.366 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [] 5 mappings in 'requestMappingHandlerMapping'
2025-10-19 00:42:41.507 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - [] Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-19 00:42:41.585 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - [] 

Using generated security password: bfc7ba51-b318-44ea-88d4-bcd7c7f1c900

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-19 00:42:41.611 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - [] Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-10-19 00:42:42.237 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - [] ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-19 00:42:42.482 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [] ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-19 00:42:43.143 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Starting ProtocolHandler ["http-nio-8080"]
2025-10-19 00:42:43.243 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat started on port 8080 (http) with context path '/'
2025-10-19 00:42:43.283 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Started SimplePaymentProcessingServiceApplication in 16.583 seconds (process running for 19.061)
2025-10-19 00:54:45.446 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - [] Commencing graceful shutdown. Waiting for active requests to complete
2025-10-19 00:54:45.970 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - [] Graceful shutdown complete
2025-10-19 00:54:46.017 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - [] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-19 00:54:46.021 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Shutdown initiated...
2025-10-19 00:54:46.032 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Shutdown completed.
2025-10-19 00:54:53.013 [background-preinit] INFO  o.h.validator.internal.util.Version - [] HV000001: Hibernate Validator 8.0.3.Final
2025-10-19 00:54:53.180 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Starting SimplePaymentProcessingServiceApplication using Java 17.0.16 with PID 46864 (C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps\pps\target\classes started by USER in C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps)
2025-10-19 00:54:53.182 [main] DEBUG c.e.p.SimplePaymentProcessingServiceApplication - [] Running with Spring Boot v3.5.6, Spring v6.2.11
2025-10-19 00:54:53.184 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] The following 1 profile is active: "prod"
2025-10-19 00:54:55.943 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-19 00:54:56.362 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Finished Spring Data repository scanning in 383 ms. Found 3 JPA repository interfaces.
2025-10-19 00:54:57.904 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat initialized with port 8080 (http)
2025-10-19 00:54:57.948 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Initializing ProtocolHandler ["http-nio-8080"]
2025-10-19 00:54:57.953 [main] INFO  o.a.catalina.core.StandardService - [] Starting service [Tomcat]
2025-10-19 00:54:57.954 [main] INFO  o.a.catalina.core.StandardEngine - [] Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-19 00:54:58.218 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - [] Initializing Spring embedded WebApplicationContext
2025-10-19 00:54:58.219 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - [] Root WebApplicationContext: initialization completed in 4907 ms
2025-10-19 00:54:58.874 [main] INFO  o.h.jpa.internal.util.LogHelper - [] HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-19 00:54:59.070 [main] INFO  org.hibernate.Version - [] HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-19 00:54:59.222 [main] INFO  o.h.c.i.RegionFactoryInitiator - [] HHH000026: Second-level cache disabled
2025-10-19 00:55:00.315 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - [] No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-19 00:55:00.455 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Starting...
2025-10-19 00:55:01.170 [main] INFO  com.zaxxer.hikari.pool.HikariPool - [] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@47b961e2
2025-10-19 00:55:01.176 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Start completed.
2025-10-19 00:55:01.369 [main] INFO  o.hibernate.orm.connections.pooling - [] HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-19 00:55:03.595 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - [] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-19 00:55:03.976 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - [] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-19 00:55:03.991 [main] INFO  com.example.pps.config.DebugConfig - [] Resolved DB_PASSWORD: ppspass
2025-10-19 00:55:05.293 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - [] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-19 00:55:05.590 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [] 5 mappings in 'requestMappingHandlerMapping'
2025-10-19 00:55:05.729 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - [] Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-19 00:55:05.786 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - [] 

Using generated security password: ca31218e-adae-4575-a477-10eea80478b6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-19 00:55:05.819 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - [] Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-10-19 00:55:06.496 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - [] ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-19 00:55:06.617 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [] ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-19 00:55:07.035 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Starting ProtocolHandler ["http-nio-8080"]
2025-10-19 00:55:07.098 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat started on port 8080 (http) with context path '/'
2025-10-19 00:55:07.125 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Started SimplePaymentProcessingServiceApplication in 15.759 seconds (process running for 16.989)
2025-10-19 00:56:17.972 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - [] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-19 00:56:17.972 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - [] Initializing Servlet 'dispatcherServlet'
2025-10-19 00:56:17.974 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected StandardServletMultipartResolver
2025-10-19 00:56:17.974 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected AcceptHeaderLocaleResolver
2025-10-19 00:56:17.974 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected FixedThemeResolver
2025-10-19 00:56:17.975 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@16117d9
2025-10-19 00:56:17.975 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected org.springframework.web.servlet.support.SessionFlashMapManager@359f3401
2025-10-19 00:56:17.975 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-19 00:56:17.975 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - [] Completed initialization in 3 ms
2025-10-19 00:56:18.010 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [7becd020-df18-42fb-a5fd-fdb25f9ba022] POST "/api/v1/transactions/initiate", parameters={}
2025-10-19 00:56:18.013 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Mapped to com.example.pps.controller.TransactionController#initiatePayment(InitiatePaymentRequest, String)
2025-10-19 00:56:18.163 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Read "application/json;charset=UTF-8" to [InitiatePaymentRequest(amount=15500.0, currency=NGN, merchantRef=ORDER-99347, customerEmail=customer (truncated)...]
2025-10-19 00:56:18.365 [http-nio-8080-exec-1] DEBUG c.e.p.c.TransactionController - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Received payment initiation request: InitiatePaymentRequest(amount=15500.0, currency=NGN, merchantRef=ORDER-99347, customerEmail=customer.name@example.com, paymentMethod=CARD, paymentGateway=PAYSTACK, merchantApiKey=merchant123_api_secret)
2025-10-19 00:56:18.365 [http-nio-8080-exec-1] DEBUG c.e.p.c.TransactionController - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Idempotency-Key: order-A92B3C-202506
2025-10-19 00:56:18.388 [http-nio-8080-exec-1] INFO  c.e.pps.service.TransactionService - [7becd020-df18-42fb-a5fd-fdb25f9ba022] [correlationId=7becd020-df18-42fb-a5fd-fdb25f9ba022] Initiating payment | MerchantRef=ORDER-99347 | IdempotencyKey=order-A92B3C-202506 | Amount=15500.0 NGN | Gateway=PAYSTACK
2025-10-19 00:56:19.377 [http-nio-8080-exec-1] DEBUG c.e.pps.service.TransactionService - [7becd020-df18-42fb-a5fd-fdb25f9ba022] [correlationId=7becd020-df18-42fb-a5fd-fdb25f9ba022] Merchant authenticated | MerchantID=d4f63dd3-8853-4bfd-8a9c-199516a128a2 | Name=Test Merchant
2025-10-19 00:56:19.435 [http-nio-8080-exec-1] INFO  c.e.pps.service.TransactionService - [7becd020-df18-42fb-a5fd-fdb25f9ba022] [correlationId=7becd020-df18-42fb-a5fd-fdb25f9ba022] Selected payment gateway=PAYSTACK | MerchantRef=ORDER-99347
2025-10-19 00:56:19.437 [http-nio-8080-exec-1] DEBUG c.e.pps.service.TransactionService - [7becd020-df18-42fb-a5fd-fdb25f9ba022] [correlationId=7becd020-df18-42fb-a5fd-fdb25f9ba022] Sending request to gateway=PAYSTACK | Amount=15500.0 | Customer=customer.name@example.com
2025-10-19 00:56:19.480 [http-nio-8080-exec-1] INFO  c.e.pps.service.TransactionService - [7becd020-df18-42fb-a5fd-fdb25f9ba022] [correlationId=7becd020-df18-42fb-a5fd-fdb25f9ba022] Payment initiated | TxnID=f2d4c28e-4826-41c7-839c-fda277ab6cd8 | PGRef=3705c3a2-6efb-4776-baef-bd9f63787dd1 | Gateway=PAYSTACK | Status=PENDING
2025-10-19 00:56:19.552 [http-nio-8080-exec-1] DEBUG c.e.p.c.TransactionController - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Payment initiation response: com.example.pps.dto.InitiatePaymentResponse@9797fb8
2025-10-19 00:56:19.626 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 00:56:19.642 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Writing [com.example.pps.dto.InitiatePaymentResponse@9797fb8]
2025-10-19 00:56:19.703 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [7becd020-df18-42fb-a5fd-fdb25f9ba022] Completed 200 OK
2025-10-19 01:01:14.453 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - [f38b4817-bb56-445e-b338-b3329e2a28f6] POST "/api/v1/webhooks/paystack", parameters={}
2025-10-19 01:01:14.453 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [f38b4817-bb56-445e-b338-b3329e2a28f6] Mapped to com.example.pps.controller.WebhookController#handlePaystackWebhook(PaystackWebhookPayload, String)
2025-10-19 01:01:14.460 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [f38b4817-bb56-445e-b338-b3329e2a28f6] Read "application/json;charset=UTF-8" to [PaystackWebhookPayload(event=charge.success, data=PaystackWebhookPayload.Data(reference=ORDER-99348, (truncated)...]
2025-10-19 01:01:14.482 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [f38b4817-bb56-445e-b338-b3329e2a28f6] Using @ExceptionHandler com.example.pps.exception.GlobalExceptionHandler#handleBadRequest(IllegalArgumentException)
2025-10-19 01:01:14.492 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [f38b4817-bb56-445e-b338-b3329e2a28f6] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:01:14.493 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [f38b4817-bb56-445e-b338-b3329e2a28f6] Writing [{error=Transaction not found for reference: ORDER-99348}]
2025-10-19 01:01:14.504 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [f38b4817-bb56-445e-b338-b3329e2a28f6] Resolved [java.lang.IllegalArgumentException: Transaction not found for reference: ORDER-99348]
2025-10-19 01:01:14.506 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - [f38b4817-bb56-445e-b338-b3329e2a28f6] Completed 400 BAD_REQUEST
2025-10-19 01:03:58.162 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - [117fc174-e795-438e-814b-93941ab4111c] POST "/api/v1/transactions/initiate", parameters={}
2025-10-19 01:03:58.163 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [117fc174-e795-438e-814b-93941ab4111c] Mapped to com.example.pps.controller.TransactionController#initiatePayment(InitiatePaymentRequest, String)
2025-10-19 01:03:58.165 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [117fc174-e795-438e-814b-93941ab4111c] Read "application/json;charset=UTF-8" to [InitiatePaymentRequest(amount=15500.0, currency=NGN, merchantRef=ORDER-99349, customerEmail=customer (truncated)...]
2025-10-19 01:03:58.170 [http-nio-8080-exec-3] DEBUG c.e.p.c.TransactionController - [117fc174-e795-438e-814b-93941ab4111c] Received payment initiation request: InitiatePaymentRequest(amount=15500.0, currency=NGN, merchantRef=ORDER-99349, customerEmail=customer.name@example.com, paymentMethod=CARD, paymentGateway=PAYSTACK, merchantApiKey=merchant123_api_secret)
2025-10-19 01:03:58.170 [http-nio-8080-exec-3] DEBUG c.e.p.c.TransactionController - [117fc174-e795-438e-814b-93941ab4111c] Idempotency-Key: order-A92B3C-202508
2025-10-19 01:03:58.174 [http-nio-8080-exec-3] INFO  c.e.pps.service.TransactionService - [117fc174-e795-438e-814b-93941ab4111c] [correlationId=117fc174-e795-438e-814b-93941ab4111c] Initiating payment | MerchantRef=ORDER-99349 | IdempotencyKey=order-A92B3C-202508 | Amount=15500.0 NGN | Gateway=PAYSTACK
2025-10-19 01:03:58.183 [http-nio-8080-exec-3] DEBUG c.e.pps.service.TransactionService - [117fc174-e795-438e-814b-93941ab4111c] [correlationId=117fc174-e795-438e-814b-93941ab4111c] Merchant authenticated | MerchantID=d4f63dd3-8853-4bfd-8a9c-199516a128a2 | Name=Test Merchant
2025-10-19 01:03:58.190 [http-nio-8080-exec-3] INFO  c.e.pps.service.TransactionService - [117fc174-e795-438e-814b-93941ab4111c] [correlationId=117fc174-e795-438e-814b-93941ab4111c] Selected payment gateway=PAYSTACK | MerchantRef=ORDER-99349
2025-10-19 01:03:58.191 [http-nio-8080-exec-3] DEBUG c.e.pps.service.TransactionService - [117fc174-e795-438e-814b-93941ab4111c] [correlationId=117fc174-e795-438e-814b-93941ab4111c] Sending request to gateway=PAYSTACK | Amount=15500.0 | Customer=customer.name@example.com
2025-10-19 01:03:58.192 [http-nio-8080-exec-3] INFO  c.e.pps.service.TransactionService - [117fc174-e795-438e-814b-93941ab4111c] [correlationId=117fc174-e795-438e-814b-93941ab4111c] Payment initiated | TxnID=a1d6b99f-7d72-43d6-8e56-cf4fe346a65f | PGRef=f15f79c9-eea7-4978-b440-c3da2fac17db | Gateway=PAYSTACK | Status=PENDING
2025-10-19 01:03:58.203 [http-nio-8080-exec-3] DEBUG c.e.p.c.TransactionController - [117fc174-e795-438e-814b-93941ab4111c] Payment initiation response: com.example.pps.dto.InitiatePaymentResponse@638329fe
2025-10-19 01:03:58.204 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [117fc174-e795-438e-814b-93941ab4111c] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:03:58.205 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [117fc174-e795-438e-814b-93941ab4111c] Writing [com.example.pps.dto.InitiatePaymentResponse@638329fe]
2025-10-19 01:03:58.206 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - [117fc174-e795-438e-814b-93941ab4111c] Completed 200 OK
2025-10-19 01:05:24.612 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - [6a3bffbe-d989-4550-a541-8d179ed97a69] POST "/api/v1/webhooks/paystack", parameters={}
2025-10-19 01:05:24.613 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [6a3bffbe-d989-4550-a541-8d179ed97a69] Mapped to com.example.pps.controller.WebhookController#handlePaystackWebhook(PaystackWebhookPayload, String)
2025-10-19 01:05:24.613 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [6a3bffbe-d989-4550-a541-8d179ed97a69] Read "application/json;charset=UTF-8" to [PaystackWebhookPayload(event=charge.success, data=PaystackWebhookPayload.Data(reference=ORDER-99348, (truncated)...]
2025-10-19 01:05:24.625 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [6a3bffbe-d989-4550-a541-8d179ed97a69] Using @ExceptionHandler com.example.pps.exception.GlobalExceptionHandler#handleBadRequest(IllegalArgumentException)
2025-10-19 01:05:24.626 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [6a3bffbe-d989-4550-a541-8d179ed97a69] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:05:24.626 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [6a3bffbe-d989-4550-a541-8d179ed97a69] Writing [{error=Transaction not found for reference: ORDER-99348}]
2025-10-19 01:05:24.627 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [6a3bffbe-d989-4550-a541-8d179ed97a69] Resolved [java.lang.IllegalArgumentException: Transaction not found for reference: ORDER-99348]
2025-10-19 01:05:24.628 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - [6a3bffbe-d989-4550-a541-8d179ed97a69] Completed 400 BAD_REQUEST
2025-10-19 01:10:08.207 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - [b10908c1-0e3d-468b-bfa0-700efb34f147] POST "/api/v1/webhooks/paystack", parameters={}
2025-10-19 01:10:08.207 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [b10908c1-0e3d-468b-bfa0-700efb34f147] Mapped to com.example.pps.controller.WebhookController#handlePaystackWebhook(PaystackWebhookPayload, String)
2025-10-19 01:10:08.209 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [b10908c1-0e3d-468b-bfa0-700efb34f147] Read "application/json;charset=UTF-8" to [PaystackWebhookPayload(event=charge.success, data=PaystackWebhookPayload.Data(reference=ORDER-99349, (truncated)...]
2025-10-19 01:10:08.270 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [b10908c1-0e3d-468b-bfa0-700efb34f147] Using @ExceptionHandler com.example.pps.exception.GlobalExceptionHandler#handleGeneric(Exception)
2025-10-19 01:10:08.273 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [b10908c1-0e3d-468b-bfa0-700efb34f147] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:10:08.273 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [b10908c1-0e3d-468b-bfa0-700efb34f147] Writing [{details=Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): (truncated)...]
2025-10-19 01:10:08.274 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [b10908c1-0e3d-468b-bfa0-700efb34f147] Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.example.pps.entity.WebhookEvent#d10d88e0-4a42-47cc-aea2-470836cb1930]]
2025-10-19 01:10:08.275 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - [b10908c1-0e3d-468b-bfa0-700efb34f147] Completed 500 INTERNAL_SERVER_ERROR
2025-10-19 01:22:17.911 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - [1ab4eb93-c185-4087-871e-020601b162c2] POST "/api/v1/webhooks/paystack", parameters={}
2025-10-19 01:22:17.911 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [1ab4eb93-c185-4087-871e-020601b162c2] Mapped to com.example.pps.controller.WebhookController#handlePaystackWebhook(PaystackWebhookPayload, String)
2025-10-19 01:22:17.913 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [1ab4eb93-c185-4087-871e-020601b162c2] Read "application/json;charset=UTF-8" to [PaystackWebhookPayload(event=charge.success, data=PaystackWebhookPayload.Data(reference=ORDER-99349, (truncated)...]
2025-10-19 01:22:17.930 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [1ab4eb93-c185-4087-871e-020601b162c2] Using @ExceptionHandler com.example.pps.exception.GlobalExceptionHandler#handleGeneric(Exception)
2025-10-19 01:22:17.930 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [1ab4eb93-c185-4087-871e-020601b162c2] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:22:17.931 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [1ab4eb93-c185-4087-871e-020601b162c2] Writing [{details=Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): (truncated)...]
2025-10-19 01:22:17.932 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [1ab4eb93-c185-4087-871e-020601b162c2] Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.example.pps.entity.WebhookEvent#059cc545-c690-4227-a73d-90ba4455f68c]]
2025-10-19 01:22:17.933 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - [1ab4eb93-c185-4087-871e-020601b162c2] Completed 500 INTERNAL_SERVER_ERROR
2025-10-19 01:27:34.391 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - [] Commencing graceful shutdown. Waiting for active requests to complete
2025-10-19 01:27:34.820 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - [] Graceful shutdown complete
2025-10-19 01:27:34.865 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - [] Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-19 01:27:34.869 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Shutdown initiated...
2025-10-19 01:27:34.880 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Shutdown completed.
2025-10-19 01:27:40.365 [background-preinit] INFO  o.h.validator.internal.util.Version - [] HV000001: Hibernate Validator 8.0.3.Final
2025-10-19 01:27:40.527 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Starting SimplePaymentProcessingServiceApplication using Java 17.0.16 with PID 59240 (C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps\pps\target\classes started by USER in C:\Users\USER\Documents\SpringBoot_Projects\Simple_Payment_Processing\pps)
2025-10-19 01:27:40.534 [main] DEBUG c.e.p.SimplePaymentProcessingServiceApplication - [] Running with Spring Boot v3.5.6, Spring v6.2.11
2025-10-19 01:27:40.538 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] The following 1 profile is active: "prod"
2025-10-19 01:27:42.965 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-19 01:27:43.437 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - [] Finished Spring Data repository scanning in 422 ms. Found 3 JPA repository interfaces.
2025-10-19 01:27:44.987 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat initialized with port 8080 (http)
2025-10-19 01:27:45.024 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Initializing ProtocolHandler ["http-nio-8080"]
2025-10-19 01:27:45.027 [main] INFO  o.a.catalina.core.StandardService - [] Starting service [Tomcat]
2025-10-19 01:27:45.027 [main] INFO  o.a.catalina.core.StandardEngine - [] Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-19 01:27:45.199 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - [] Initializing Spring embedded WebApplicationContext
2025-10-19 01:27:45.200 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - [] Root WebApplicationContext: initialization completed in 4541 ms
2025-10-19 01:27:45.574 [main] INFO  o.h.jpa.internal.util.LogHelper - [] HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-19 01:27:45.728 [main] INFO  org.hibernate.Version - [] HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-19 01:27:45.825 [main] INFO  o.h.c.i.RegionFactoryInitiator - [] HHH000026: Second-level cache disabled
2025-10-19 01:27:46.686 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - [] No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-19 01:27:46.776 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Starting...
2025-10-19 01:27:47.341 [main] INFO  com.zaxxer.hikari.pool.HikariPool - [] HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5bf523e3
2025-10-19 01:27:47.345 [main] INFO  com.zaxxer.hikari.HikariDataSource - [] HikariPool-1 - Start completed.
2025-10-19 01:27:47.518 [main] INFO  o.hibernate.orm.connections.pooling - [] HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-19 01:27:49.378 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - [] HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-19 01:27:49.731 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - [] Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-19 01:27:49.750 [main] INFO  com.example.pps.config.DebugConfig - [] Resolved DB_PASSWORD: ppspass
2025-10-19 01:27:51.096 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - [] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-19 01:27:51.274 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [] 5 mappings in 'requestMappingHandlerMapping'
2025-10-19 01:27:51.405 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - [] Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-10-19 01:27:51.488 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - [] 

Using generated security password: 4fae6298-495a-4a0d-8096-e76cb4e7d774

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-19 01:27:51.545 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - [] Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-10-19 01:27:52.185 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - [] ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-19 01:27:52.310 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [] ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-19 01:27:52.739 [main] INFO  o.a.coyote.http11.Http11NioProtocol - [] Starting ProtocolHandler ["http-nio-8080"]
2025-10-19 01:27:52.783 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - [] Tomcat started on port 8080 (http) with context path '/'
2025-10-19 01:27:52.799 [main] INFO  c.e.p.SimplePaymentProcessingServiceApplication - [] Started SimplePaymentProcessingServiceApplication in 14.102 seconds (process running for 15.216)
2025-10-19 01:28:39.442 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - [] Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-19 01:28:39.442 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - [] Initializing Servlet 'dispatcherServlet'
2025-10-19 01:28:39.443 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected StandardServletMultipartResolver
2025-10-19 01:28:39.443 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected AcceptHeaderLocaleResolver
2025-10-19 01:28:39.443 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected FixedThemeResolver
2025-10-19 01:28:39.444 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@13ac1657
2025-10-19 01:28:39.444 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] Detected org.springframework.web.servlet.support.SessionFlashMapManager@73418044
2025-10-19 01:28:39.445 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [] enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-19 01:28:39.445 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - [] Completed initialization in 3 ms
2025-10-19 01:28:39.496 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [ca7136ac-6580-4228-aacd-5ac80ded4e60] POST "/api/v1/webhooks/paystack", parameters={}
2025-10-19 01:28:39.498 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Mapped to com.example.pps.controller.WebhookController#handlePaystackWebhook(PaystackWebhookPayload, String)
2025-10-19 01:28:39.618 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Read "application/json;charset=UTF-8" to [PaystackWebhookPayload(event=charge.success, data=PaystackWebhookPayload.Data(reference=ORDER-99349, (truncated)...]
2025-10-19 01:28:40.103 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Using @ExceptionHandler com.example.pps.exception.GlobalExceptionHandler#handleGeneric(Exception)
2025-10-19 01:28:40.123 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-19 01:28:40.125 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Writing [{details=Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): (truncated)...]
2025-10-19 01:28:40.149 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Resolved [org.springframework.orm.ObjectOptimisticLockingFailureException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.example.pps.entity.WebhookEvent#0b469f01-9fb8-4c41-ac0e-3b8bb88dc67f]]
2025-10-19 01:28:40.151 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - [ca7136ac-6580-4228-aacd-5ac80ded4e60] Completed 500 INTERNAL_SERVER_ERROR
